# Data Model: Gold Tier Autonomous Employee

**Date**: 2026-01-17
**Feature**: Gold Tier Autonomous Employee
**Phase**: Phase 1 - Design & Contracts

## Overview

This document defines the data structures used in the Gold Tier Autonomous Employee. All data is stored as files in the Obsidian vault using markdown with YAML frontmatter for structured data and JSON for logs. Gold Tier extends Silver Tier with cross-domain intelligence, financial data, social media analytics, and autonomous task tracking.

## Entity Definitions

### 1. CEO Briefing

**Purpose**: Weekly business intelligence report generated autonomously every Sunday.

**Storage**: Markdown file with YAML frontmatter
**Location**: `Briefings/{YYYY-MM-DD}_Monday_Briefing.md`
**Naming Pattern**: `2026-01-20_Monday_Briefing.md`
**Generation Frequency**: Weekly (Sunday 7:00 AM)

**Attributes**:

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| generated | datetime | Yes | ISO-8601 timestamp of generation | "2026-01-19T07:00:00Z" |
| period_start | date | Yes | Start of analysis period | "2026-01-12" |
| period_end | date | Yes | End of analysis period | "2026-01-18" |
| revenue_this_week | decimal | Yes | Revenue for the week | 2450.00 |
| revenue_mtd | decimal | Yes | Month-to-date revenue | 4500.00 |
| revenue_target | decimal | Yes | Monthly revenue target | 10000.00 |
| tasks_completed | integer | Yes | Tasks completed this week | 12 |
| bottlenecks_count | integer | Yes | Number of bottlenecks identified | 2 |
| suggestions_count | integer | Yes | Number of proactive suggestions | 3 |
| social_posts | integer | Yes | Social media posts this week | 8 |
| outstanding_invoices | decimal | Yes | Total outstanding invoices | 3500.00 |

**Example**:
```yaml
---
generated: 2026-01-19T07:00:00Z
period_start: 2026-01-12
period_end: 2026-01-18
revenue_this_week: 2450.00
revenue_mtd: 4500.00
revenue_target: 10000.00
tasks_completed: 12
bottlenecks_count: 2
suggestions_count: 3
social_posts: 8
outstanding_invoices: 3500.00
---

# Monday Morning CEO Briefing

## Executive Summary
Strong week with revenue ahead of target. One bottleneck identified in client proposals.

## Revenue
- **This Week**: $2,450
- **MTD**: $4,500 (45% of $10,000 target)
- **Trend**: On track

## Completed Tasks
- [x] Client A invoice sent and paid
- [x] Project Alpha milestone 2 delivered
- [x] Weekly social media posts scheduled

## Bottlenecks
| Task | Expected | Actual | Delay |
|------|----------|--------|-------|
| Client B proposal | 2 days | 5 days | +3 days |

## Proactive Suggestions
### Cost Optimization
- **Notion**: No team activity in 45 days. Cost: $15/month.
  - [ACTION] Cancel subscription? Move to /Pending_Approval

### Upcoming Deadlines
- Project Alpha final delivery: Jan 25 (6 days)
- Quarterly tax prep: Jan 31 (12 days)

## Social Media Performance
- LinkedIn: 3 posts, 45 engagements
- Twitter: 4 tweets, 28 engagements
- Facebook: 1 post, 12 engagements

## Financial Health
- Outstanding invoices: $3,500
- Overdue invoices: $0
- Cash flow: Positive

---
*Generated by AI Employee Gold Tier v1.0*
```

---

### 2. Xero Transaction

**Purpose**: Represents a financial transaction synced from Xero accounting.

**Storage**: Markdown file with YAML frontmatter
**Location**: `Accounting/Transactions/{YYYY-MM}/{transaction_id}.md`
**Naming Pattern**: `2026-01/xero_tx_12345.md`

**Attributes**:

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| type | string | Yes | Entity type identifier | "xero_transaction" |
| transaction_id | string | Yes | Xero transaction ID | "xero_tx_12345" |
| date | date | Yes | Transaction date | "2026-01-15" |
| amount | decimal | Yes | Transaction amount | 500.00 |
| currency | string | Yes | Currency code | "USD" |
| category | string | Yes | Transaction category | "income", "expense", "transfer" |
| subcategory | string | No | Detailed category | "software_subscription" |
| description | string | Yes | Transaction description | "Monthly Notion subscription" |
| vendor | string | No | Vendor/client name | "Notion Labs Inc" |
| invoice_id | string | No | Related invoice ID | "INV-2026-001" |
| tax_deductible | boolean | Yes | Whether tax deductible | true |
| business_related | boolean | Yes | Whether business expense | true |
| synced_at | datetime | Yes | When synced from Xero | "2026-01-15T10:30:00Z" |

**Example**:
```yaml
---
type: xero_transaction
transaction_id: xero_tx_12345
date: 2026-01-15
amount: 15.00
currency: USD
category: expense
subcategory: software_subscription
description: Monthly Notion subscription
vendor: Notion Labs Inc
tax_deductible: true
business_related: true
synced_at: 2026-01-15T10:30:00Z
---

## Transaction Details
- **Date**: January 15, 2026
- **Amount**: $15.00
- **Category**: Software Subscription
- **Vendor**: Notion Labs Inc

## Analysis
- **Tax Deductible**: Yes
- **Business Related**: Yes
- **Recurring**: Yes (monthly)

## Notes
Subscription has been inactive for 45 days. Consider cancellation.
```

---

### 3. Social Media Post

**Purpose**: Represents a social media post across platforms.

**Storage**: Markdown file with YAML frontmatter
**Location**: `Social_Media/Posts/{YYYY-MM}/{post_id}.md`
**Naming Pattern**: `2026-01/post_linkedin_20260115_103000.md`

**Attributes**:

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| type | string | Yes | Entity type identifier | "social_post" |
| post_id | string | Yes | Unique post identifier | "post_linkedin_20260115_103000" |
| platform | enum | Yes | Social media platform | "linkedin", "twitter", "facebook", "instagram" |
| content | string | Yes | Post content/text | "Excited to share..." |
| media_urls | array | No | URLs of attached media | ["https://..."] |
| scheduled_at | datetime | No | Scheduled post time | "2026-01-15T10:30:00Z" |
| published_at | datetime | No | Actual publish time | "2026-01-15T10:30:05Z" |
| status | enum | Yes | Post status | "draft", "scheduled", "published", "failed" |
| engagement | object | No | Engagement metrics | See below |
| approval_required | boolean | Yes | Whether needs HITL approval | true |
| approved_by | string | No | Who approved | "human" |

**Engagement Object**:
```yaml
engagement:
  likes: 45
  comments: 8
  shares: 12
  impressions: 1250
  clicks: 67
  last_updated: "2026-01-16T10:00:00Z"
```

**Example**:
```yaml
---
type: social_post
post_id: post_linkedin_20260115_103000
platform: linkedin
content: |
  Excited to share our latest project milestone! üöÄ

  We've successfully delivered Phase 2 of Project Alpha,
  bringing innovative solutions to our clients.

  #ProjectManagement #Innovation #Success
media_urls: []
scheduled_at: 2026-01-15T10:30:00Z
published_at: 2026-01-15T10:30:05Z
status: published
engagement:
  likes: 45
  comments: 8
  shares: 12
  impressions: 1250
  clicks: 67
  last_updated: 2026-01-16T10:00:00Z
approval_required: true
approved_by: human
---

## Post Content
Excited to share our latest project milestone! üöÄ

We've successfully delivered Phase 2 of Project Alpha,
bringing innovative solutions to our clients.

#ProjectManagement #Innovation #Success

## Performance
- **Likes**: 45
- **Comments**: 8
- **Shares**: 12
- **Impressions**: 1,250
- **Clicks**: 67

## Analysis
Strong engagement rate (5.2%). Post performed above average.
```

---

### 4. Cross-Domain Context

**Purpose**: Represents shared context between personal and business domains.

**Storage**: Markdown file with YAML frontmatter
**Location**: `Context/{context_id}.md`
**Naming Pattern**: `context_client_payment_20260115.md`

**Attributes**:

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| type | string | Yes | Entity type identifier | "cross_domain_context" |
| context_id | string | Yes | Unique context identifier | "context_client_payment_20260115" |
| trigger_domain | enum | Yes | Originating domain | "personal", "business" |
| trigger_event | string | Yes | Event that created context | "client_payment_received" |
| related_domains | array | Yes | Affected domains | ["business", "personal"] |
| actions_required | array | Yes | Actions to take | See below |
| priority | enum | Yes | Context priority | "low", "medium", "high", "urgent" |
| created_at | datetime | Yes | Context creation time | "2026-01-15T14:30:00Z" |
| resolved_at | datetime | No | When context resolved | "2026-01-15T15:00:00Z" |
| status | enum | Yes | Context status | "pending", "in_progress", "resolved" |

**Actions Required Array**:
```yaml
actions_required:
  - domain: business
    action: update_xero_invoice
    details: "Mark Invoice INV-2026-001 as paid"
  - domain: business
    action: update_revenue
    details: "Add $1,500 to monthly revenue"
  - domain: personal
    action: send_thank_you
    details: "Send thank you message to Client A"
```

**Example**:
```yaml
---
type: cross_domain_context
context_id: context_client_payment_20260115
trigger_domain: personal
trigger_event: client_payment_received
related_domains:
  - business
  - personal
actions_required:
  - domain: business
    action: update_xero_invoice
    details: "Mark Invoice INV-2026-001 as paid"
  - domain: business
    action: update_revenue
    details: "Add $1,500 to monthly revenue"
  - domain: personal
    action: send_thank_you
    details: "Send thank you message to Client A"
priority: high
created_at: 2026-01-15T14:30:00Z
resolved_at: 2026-01-15T15:00:00Z
status: resolved
---

## Context Summary
Client A payment received via bank transfer.

## Trigger Event
- **Domain**: Personal (Bank Account)
- **Event**: Payment received
- **Amount**: $1,500
- **From**: Client A

## Cross-Domain Impact

### Business Domain
1. Update Xero invoice status
2. Update monthly revenue tracking
3. Update cash flow projections

### Personal Domain
1. Send thank you message
2. Update client relationship notes

## Actions Taken
- [x] Xero invoice marked as paid
- [x] Revenue updated in Business_Goals.md
- [x] Thank you message drafted (pending approval)

## Resolution
All actions completed successfully. Context resolved.
```

---

### 5. Ralph Wiggum Task State

**Purpose**: Tracks autonomous multi-step task completion state.

**Storage**: JSON file
**Location**: `Ralph_State/{task_id}.json`
**Naming Pattern**: `task_process_invoices_20260115.json`

**Attributes**:

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| task_id | string | Yes | Unique task identifier | "task_process_invoices_20260115" |
| prompt | string | Yes | Original task prompt | "Process all pending invoices..." |
| completion_promise | string | Yes | Completion indicator | "TASK_COMPLETE" |
| max_iterations | integer | Yes | Maximum iterations allowed | 10 |
| current_iteration | integer | Yes | Current iteration count | 3 |
| started_at | datetime | Yes | Task start time | "2026-01-15T10:00:00Z" |
| last_iteration_at | datetime | Yes | Last iteration time | "2026-01-15T10:15:00Z" |
| timeout_at | datetime | Yes | Task timeout time | "2026-01-15T10:30:00Z" |
| status | enum | Yes | Task status | "running", "completed", "timeout", "max_iterations" |
| progress | array | Yes | Progress checkpoints | See below |
| completion_file | string | No | File indicating completion | "/Done/task_complete.md" |

**Progress Array**:
```json
"progress": [
  {
    "iteration": 1,
    "timestamp": "2026-01-15T10:00:00Z",
    "action": "Read pending invoices",
    "result": "Found 3 invoices"
  },
  {
    "iteration": 2,
    "timestamp": "2026-01-15T10:10:00Z",
    "action": "Process invoice 1",
    "result": "Sent to Client A"
  }
]
```

**Example**:
```json
{
  "task_id": "task_process_invoices_20260115",
  "prompt": "Process all pending invoices in Needs_Action, send via email, and move to Done",
  "completion_promise": "TASK_COMPLETE",
  "max_iterations": 10,
  "current_iteration": 3,
  "started_at": "2026-01-15T10:00:00Z",
  "last_iteration_at": "2026-01-15T10:15:00Z",
  "timeout_at": "2026-01-15T10:30:00Z",
  "status": "running",
  "progress": [
    {
      "iteration": 1,
      "timestamp": "2026-01-15T10:00:00Z",
      "action": "Read pending invoices",
      "result": "Found 3 invoices"
    },
    {
      "iteration": 2,
      "timestamp": "2026-01-15T10:10:00Z",
      "action": "Process invoice 1",
      "result": "Sent to Client A"
    },
    {
      "iteration": 3,
      "timestamp": "2026-01-15T10:15:00Z",
      "action": "Process invoice 2",
      "result": "Sent to Client B"
    }
  ],
  "completion_file": null
}
```

---

### 6. Enhanced Audit Log Entry

**Purpose**: Extended audit log with additional Gold Tier fields.

**Storage**: JSON (newline-delimited)
**Location**: `Logs/{YYYY-MM-DD}.json`
**Retention**: 90 days minimum

**Attributes** (extends Silver Tier):

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| timestamp | datetime | Yes | ISO-8601 timestamp | "2026-01-15T10:30:00Z" |
| action_type | enum | Yes | Type of action | "xero_sync", "social_post", "ceo_briefing", etc. |
| actor | enum | Yes | Component that performed action | "claude_code", "human", "system", "ralph_loop" |
| target | string | Yes | Target of the action | "Invoice INV-2026-001" |
| parameters | object | No | Action parameters | {"amount": 1500, "client": "Client A"} |
| approval_status | enum | No | Approval status | "approved", "rejected", "auto_approved", "pending" |
| approved_by | string | No | Who approved | "human", "auto" |
| result | enum | Yes | Action result | "success", "failure", "partial" |
| error | string | No | Error message if failed | "API rate limit exceeded" |
| retry_count | integer | No | Number of retries | 2 |
| execution_time_ms | integer | No | Execution time in milliseconds | 1234 |
| domain | enum | No | Domain context | "personal", "business", "cross_domain" |
| cost | decimal | No | API cost if applicable | 0.05 |

**Example**:
```json
{"timestamp":"2026-01-15T10:30:00Z","action_type":"xero_sync","actor":"claude_code","target":"Invoice INV-2026-001","parameters":{"amount":1500,"client":"Client A","status":"paid"},"approval_status":"auto_approved","approved_by":"auto","result":"success","retry_count":0,"execution_time_ms":1234,"domain":"business","cost":0.02}
{"timestamp":"2026-01-15T10:31:00Z","action_type":"social_post","actor":"claude_code","target":"LinkedIn post","parameters":{"platform":"linkedin","content_length":250},"approval_status":"approved","approved_by":"human","result":"success","retry_count":0,"execution_time_ms":2345,"domain":"business","cost":0.01}
{"timestamp":"2026-01-15T10:32:00Z","action_type":"ceo_briefing","actor":"ralph_loop","target":"Weekly briefing","parameters":{"period":"2026-01-12 to 2026-01-18"},"approval_status":"auto_approved","approved_by":"auto","result":"success","retry_count":0,"execution_time_ms":45000,"domain":"cross_domain","cost":0.15}
```

---

## Relationships

```
CEO Briefing (1) ‚Üê‚Üí (N) Xero Transactions
  - Briefing analyzes transactions for the week
  - Calculates revenue, expenses, trends

CEO Briefing (1) ‚Üê‚Üí (N) Social Media Posts
  - Briefing includes social media performance
  - Tracks engagement metrics

CEO Briefing (1) ‚Üê‚Üí (N) Tasks (Done folder)
  - Briefing analyzes completed tasks
  - Identifies bottlenecks

Cross-Domain Context (1) ‚Üê‚Üí (N) Actions
  - Context triggers multiple domain actions
  - Tracks resolution across domains

Ralph Wiggum Task (1) ‚Üê‚Üí (N) Progress Checkpoints
  - Task tracks iteration progress
  - Monitors completion status

Social Media Post (1) ‚Üê‚Üí (1) Approval Request
  - Post requires HITL approval
  - Links to approval workflow

Xero Transaction (1) ‚Üê‚Üí (0..1) Invoice
  - Transaction may relate to invoice
  - Tracks payment status
```

---

## Data Flow

```
1. Xero Sync
   Xero API ‚Üí Xero Watcher ‚Üí Transaction File ‚Üí Accounting/Transactions/
   ‚Üí Update Business_Goals.md ‚Üí Trigger CEO Briefing Analysis

2. Social Media Post
   Content Draft ‚Üí Approval Request ‚Üí Pending_Approval/
   ‚Üí Human Approval ‚Üí Approved/ ‚Üí Social MCP ‚Üí Platform API
   ‚Üí Engagement Tracking ‚Üí Social_Media/Posts/

3. CEO Briefing Generation
   Sunday 7:00 AM ‚Üí Ralph Wiggum Loop ‚Üí Analyze Xero Data
   ‚Üí Analyze Tasks ‚Üí Analyze Social Media ‚Üí Identify Bottlenecks
   ‚Üí Generate Suggestions ‚Üí Create Briefing ‚Üí Briefings/

4. Cross-Domain Reasoning
   Personal Event (Payment) ‚Üí Create Context ‚Üí Analyze Impact
   ‚Üí Generate Business Actions ‚Üí Generate Personal Actions
   ‚Üí Execute with HITL ‚Üí Resolve Context

5. Ralph Wiggum Loop
   Task Start ‚Üí Create State File ‚Üí Iteration 1 ‚Üí Check Completion
   ‚Üí Not Complete ‚Üí Iteration 2 ‚Üí Check Completion
   ‚Üí Complete ‚Üí Move to Done ‚Üí Delete State File
```

---

## Storage Estimates

**Per Week (Gold Tier)**:
- CEO Briefing: 1 file √ó 5KB = 5KB
- Xero Transactions: 50 transactions √ó 2KB = 100KB
- Social Media Posts: 10 posts √ó 3KB = 30KB
- Cross-Domain Contexts: 20 contexts √ó 2KB = 40KB
- Ralph State Files: 5 tasks √ó 5KB = 25KB
- Audit Logs: 500 entries √ó 500 bytes = 250KB
- **Total**: ~450KB/week

**90 Days (Gold Tier)**:
- CEO Briefings: 13 weeks √ó 5KB = 65KB
- Xero Transactions: 650 transactions √ó 2KB = 1.3MB
- Social Media Posts: 130 posts √ó 3KB = 390KB
- Cross-Domain Contexts: 260 contexts √ó 2KB = 520KB
- Audit Logs: 6,500 entries √ó 500 bytes = 3.25MB
- **Total**: ~5.5MB

**Mitigation**: Automatic archival after 90 days. Compressed archives for historical data.

---

## Schema Evolution

**Silver Tier ‚Üí Gold Tier Changes**:
- Added `domain` field to audit logs
- Added `cost` field for API tracking
- Added `retry_count` for error recovery
- Added `execution_time_ms` for performance tracking

**Future Considerations**:
- Add `ai_confidence` score for decisions
- Add `user_feedback` for learning
- Add `automation_level` (manual, semi-auto, full-auto)
- Add `impact_score` for prioritization

---

**Document Version**: 1.0
**Last Updated**: 2026-01-17
**Status**: Ready for Implementation
