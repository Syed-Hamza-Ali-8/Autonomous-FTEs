# Dashboard State Schema

type: object
required:
  - last_updated
  - watcher_status
  - pending_count
  - recent_activity
  - statistics

properties:
  last_updated:
    type: string
    format: date-time
    description: ISO-8601 timestamp of last update
    example: "2026-01-12T15:30:00Z"

  watcher_status:
    type: string
    enum:
      - running
      - stopped
      - unknown
    description: Watcher running state
    default: unknown

  watcher_last_check:
    type: string
    format: date-time
    description: Last successful Watcher check
    example: "2026-01-12T15:29:55Z"

  pending_count:
    type: integer
    minimum: 0
    description: Number of files in Needs_Action
    example: 3

  recent_activity:
    type: array
    maxItems: 5
    description: Last 5 processed files
    items:
      type: object
      required:
        - timestamp
        - filename
        - action
      properties:
        timestamp:
          type: string
          format: date-time
          description: When the action occurred
        filename:
          type: string
          description: Name of the file
        action:
          type: string
          description: Action performed
        summary_length:
          type: integer
          minimum: 0
          description: Length of generated summary

  statistics:
    type: object
    required:
      - today
      - this_week
      - total
    properties:
      today:
        type: integer
        minimum: 0
        description: Files processed today
      this_week:
        type: integer
        minimum: 0
        description: Files processed this week
      total:
        type: integer
        minimum: 0
        description: Total files processed

additionalProperties: false

examples:
  - last_updated: "2026-01-12T15:30:00Z"
    watcher_status: running
    watcher_last_check: "2026-01-12T15:29:55Z"
    pending_count: 3
    recent_activity:
      - timestamp: "2026-01-12T15:25:00Z"
        filename: document.pdf
        action: processed
        summary_length: 250
      - timestamp: "2026-01-12T15:20:00Z"
        filename: notes.txt
        action: processed
        summary_length: 120
    statistics:
      today: 12
      this_week: 45
      total: 127
